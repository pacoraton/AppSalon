{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","Appinicio","obtenerDatos","mostrarSeccion","cambiarPagina","paginacion","comprobarPagina","resumenCita","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","anterior","document","querySelector","siguiente","classList","add","remove","addEventListener","seccionAnterior","tabAnterior","querySelectorAll","forEach","tab","e","preventDefault","parseInt","target","dataset","menu","async","resultado","fetch","datos","json","servicio","id","precio","nombre_servicio","createElement","textContent","precio_servicio","div_servicio","idServicio","appendChild","onclick","seleccionarDiv","error","console","log","elemento","tagName","parentElement","contains","EliminarServicio","AgregarServicio","firstElementChild","nextElementSibling","Object","values","includes","ConRes","firstChild","removeChild","MenRes","Objeto","filter","item","nombreTexto","value","trim","length","alertaError","alerta","mensaje","tipo","setTimeout","dia","Date","getUTCDay","FechaActual","year","getFullYear","mes","getMonth","getDate","FechaDeshabilitar","min","Hora","HORA","split"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina=1;\r\n\r\nconst cita={\r\n    nombre:\"\",\r\n    fecha:\"\",\r\n    hora:\"\",\r\n    servicios:[]\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded',function(){\r\n    Appinicio();\r\n});\r\n\r\nfunction Appinicio(){\r\n  //Funcion para obtener los datos \r\n    obtenerDatos();\r\n\r\n  //Mostrar seccion actual  \r\n    mostrarSeccion();  \r\n\r\n  //Funcion que oculta o muestra una secicon segun el tab al que se presiona    \r\n    cambiarPagina();\r\n\r\n  //Funcion paginacion siguiente y anterior\r\n  paginacion();  \r\n\r\n  //Funcion para comprobar en que pagina se encuentra para mostrar botones paginacion\r\n  comprobarPagina();\r\n\r\n  //Funcion que muestra error si no se han completado correctamente la cita\r\n  resumenCita();\r\n\r\n  //Funcion que valida el nombre en la cita\r\n  nombreCita();\r\n\r\n  //Funcion para validar la fecha\r\n  fechaCita();\r\n\r\n  //Desahabilitat dias anteriores \r\n  deshabilitarFechaAnterior();\r\n\r\n  //Validar hora\r\n  horaCita();\r\n}\r\n\r\n\r\n//notones paginador\r\nfunction comprobarPagina(){\r\n    const anterior=document.querySelector('#anterior');\r\n    const siguiente=document.querySelector('#siguiente');\r\n\r\n    if (pagina===1){\r\n        anterior.classList.add('ocultar');\r\n        siguiente.classList.remove('ocultar');\r\n    }else if(pagina===3){\r\n        siguiente.classList.add('ocultar');\r\n        anterior.classList.remove('ocultar');\r\n\r\n        resumenCita();//Estamos en la pagina 3 mostramos el resumen de la cita\r\n       \r\n    }else{\r\n        anterior.classList.remove('ocultar');\r\n        siguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();//cambia la seccion que se muestra\r\n\r\n}\r\n\r\n//botones\r\nfunction paginacion(){\r\n    const anterior=document.querySelector('#anterior').addEventListener(\"click\",function(){\r\n        pagina--;\r\n        //console.log(pagina);\r\n        comprobarPagina();\r\n    });\r\n\r\n    const siguiente=document.querySelector('#siguiente').addEventListener(\"click\",function(){\r\n        pagina++;\r\n        //console.log(pagina);\r\n        comprobarPagina();\r\n  \r\n    });\r\n\r\n \r\n}\r\n\r\nfunction mostrarSeccion(){\r\n    //Eliminamos la seccion actual \r\n    const seccionAnterior=document.querySelector('.mostrar-seccion');\r\n    if(seccionAnterior){\r\n        seccionAnterior.classList.remove('mostrar-seccion');  \r\n    }\r\n      \r\n    //Mostramos la seccion en la que estamos\r\n    const seccionactual=document.querySelector(`#pagina-${pagina}`);\r\n          seccionactual.classList.add('mostrar-seccion'); \r\n          \r\n  //eliminar el tab anterior\r\n   const tabAnterior=document.querySelector('.tab_actual');\r\n      //console.log(tabAnterior);\r\n         if(tabAnterior){\r\n             tabAnterior.classList.remove('tab_actual');  \r\n         }\r\n            \r\n     //Se resalta el tab actual\r\n    const tab=document.querySelector(`[data-menu=\"${pagina}\"]`);\r\n    tab.classList.add('tab_actual');\r\n     \r\n\r\n}\r\n\r\n//Funcion para moverse entre paginas\r\nfunction cambiarPagina(){\r\n    const tabs= document.querySelectorAll(\".tabs button\");\r\n      \r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click',function(e){\r\n             e.preventDefault;   \r\n            pagina=parseInt(e.target.dataset.menu);\r\n           \r\n\r\n    //Se muestra la seccion seleccionada        \r\n    //const seccion=document.querySelector(`#pagina-${pagina}`);\r\n          //seccion.classList.add(\"mostrar-seccion\");  \r\n         \r\n    \r\n     //Se activa el nuevo tab seleccionado\r\n     //const tabActual=document.querySelector(`[data-menu=\"${pagina}\"]`);\r\n     //tabActual.classList.add('tab_actual');  \r\n\r\n     mostrarSeccion();\r\n     comprobarPagina();\r\n\r\n        });\r\n    });\r\n}\r\n\r\n//Obteniendo los datos\r\nasync function obtenerDatos(){\r\n\r\n    //Promise\r\n/*fetch(\"../../servicios.json\")\r\n    .then(resultado =>{\r\n        //console.log(resultado);\r\n        return resultado.json()\r\n    })\r\n    .then (datos=>{\r\n        console.log(datos.servicios)\r\n    })*/\r\n\r\n    try {\r\n\r\n   const resultado=await fetch(\"../../servicios.json\");\r\n   const datos= await resultado.json();\r\n    // console.log(datos);\r\n    const { servicios }=datos; \r\n\r\n    //Generar Html\r\n    servicios.forEach(servicio => {  \r\n     const { id,nombre,precio } =servicio;  \r\n     \r\n    //DOM Scripting\r\n\r\n    //Se agrega el nombre\r\n    const nombre_servicio=document.createElement('P');\r\n          nombre_servicio.textContent=nombre;\r\n          nombre_servicio.classList.add(\"titulo_servicio\");\r\n\r\n    //Se agrega el Precio\r\n    const precio_servicio=document.createElement('P');\r\n          precio_servicio.textContent=\"$\"+precio;\r\n          precio_servicio.classList.add('precio_ser');\r\n\r\n    //Se crea el div \r\n    const div_servicio=document.createElement('DIV');\r\n          div_servicio.classList.add('divServicio');\r\n          div_servicio.dataset.idServicio=id;\r\n          \r\n          \r\n\r\n   //Inyectamos el nombre y precio al div\r\n   div_servicio.appendChild(nombre_servicio);    \r\n   div_servicio.appendChild(precio_servicio);\r\n\r\n   //Inyectamos el div en el html\r\n   \r\n    const MostrarSer=document.querySelector('#servicios');\r\n        MostrarSer.appendChild(div_servicio);\r\n\r\n     //Selecionamos un servicio para la cita   \r\n        div_servicio.onclick=seleccionarDiv;\r\n    \r\n        \r\n\r\n   });\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n//Funcion para seleccionar una cita\r\nfunction seleccionarDiv(e){\r\nlet elemento;\r\n\r\n//Forzamos que el elemento al que damos click sea el div\r\n  if (e.target.tagName===('P')){\r\n      elemento=e.target.parentElement;\r\n  }else{\r\n      elemento=e.target;  \r\n  }\r\n\r\n   if(elemento.classList.contains(\"seleccionado\")){\r\n      \r\n    //Deseleccionamos cita\r\n       elemento.classList.remove(\"seleccionado\");\r\n     \r\n     //Identificamos el id de servicio a eliminar   \r\n     const EliminarId=(parseInt(elemento.dataset.idServicio));      \r\n        EliminarServicio(EliminarId); \r\n\r\n   }else{\r\n        //Seleccionamos cita\r\n        elemento.classList.add(\"seleccionado\")\r\n\r\n        //console.log(elemento.firstChild.nextSibling.textContent);\r\n       //Creamos el objeto con los datos del servicio seleccionado\r\n        const SerObj={\r\n            id:parseInt(elemento.dataset.idServicio),\r\n            nombre:elemento.firstElementChild.textContent,\r\n            precio:elemento.firstElementChild.nextElementSibling.textContent\r\n        }   \r\n        //console.log(SerObj);  \r\n        AgregarServicio(SerObj);\r\n   }\r\n    //console.log(elemento);\r\n }\r\n\r\n\r\n//Mostrar resumen\r\nfunction resumenCita(){\r\n    if(Object.values(cita).includes(\"\")){\r\n\r\n        //Seleccionamos el div\r\n        const ConRes=document.querySelector(\".contenedor-resumen\");\r\n\r\n        //Limpiamos html\r\n\r\n        while(ConRes.firstChild){\r\n            ConRes.removeChild(ConRes.firstChild);\r\n        }\r\n        \r\n        //Creamos el mensaje\r\n        const MenRes=document.createElement('P');\r\n            MenRes.textContent=\"Faltan datos de Servicios,hora,fecha o nombre\";\r\n            MenRes.classList.add(\"mensaje_resumen\");\r\n\r\n            ConRes.appendChild(MenRes); \r\n\r\n    }else{\r\n\r\n        console.log(\"resument de la cita\");\r\n    }\r\n}\r\n\r\n\r\nfunction AgregarServicio(Objeto){\r\n\r\n  //Destructuring\r\n const { servicios }=cita;\r\n\r\n //Combinamos el objeto con el servicio al servicios de la cita\r\n cita.servicios= [...servicios,Objeto];\r\n\r\n    console.log(cita);\r\n    //console.log(\"Se agrega un servicio\");\r\n\r\n}\r\n\r\nfunction EliminarServicio(id){\r\n//Destructuring   \r\nconst { servicios }=cita;\r\n\r\ncita.servicios=servicios.filter(item => item.id !==id); \r\nconsole.log(cita);\r\n\r\n}\r\n\r\nfunction nombreCita(){\r\n    const nombre=document.querySelector('#nombre');\r\n            nombre.addEventListener('input',(e)=> {\r\n             const nombreTexto=e.target.value.trim();       \r\n\r\n                if(nombreTexto===\"\" || nombreTexto.length <3){\r\n                    e.preventDefault();\r\n                    alertaError(\"Error en nombre\",\"error\");\r\n                }else{\r\n                     const alerta=document.querySelector(\".alerta\");   \r\n                     if(alerta){\r\n                         alerta.remove();\r\n                     }    \r\n\r\n                    //console.log(\"Correcto\");\r\n                    cita.nombre=e.target.value.trim();\r\n                }\r\n               \r\n                  //console.log(cita);\r\n            });\r\n}\r\n\r\n\r\n\r\nfunction alertaError(mensaje,tipo){  \r\n    \r\n    //Si hay una alerta anterior no crea otra\r\n    const alertaPrevia=document.querySelector(\".alerta\");\r\n            if(alertaPrevia){\r\n                return;\r\n            }\r\n\r\n        //console.log(mensaje);\r\n    //Creamos la alertaa \r\n    const alerta=document.createElement('DIV');\r\n          alerta.textContent=mensaje;\r\n          alerta.classList.add('alerta');\r\n\r\n            if(tipo==\"error\"){\r\n                alerta.classList.add('error');\r\n            }\r\n    //insertar al html\r\n    const formulario=document.querySelector(\".formulario\");\r\n          formulario.appendChild(alerta);\r\n\r\n    //Borrar la alerta a los tres segundos\r\n    setTimeout(() => {\r\n            alerta.remove();\r\n    }, 3000);\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction fechaCita(){\r\n    const fecha=document.querySelector(\"#fecha\");\r\n          fecha.addEventListener(\"input\", (e) =>{\r\n            const dia= new Date(e.target.value).getUTCDay(); \r\n\r\n            if([0,6].includes(dia)){\r\n                alertaError(\"No puedes seleccionar fines de semana\",\"error\");\r\n                e.preventDefault();\r\n                fecha.value=\"\";\r\n            }else{\r\n                //console.log(Fecha);\r\n                cita.fecha=fecha.value;\r\n            }\r\n               \r\n          });\r\n}\r\n\r\n\r\nfunction deshabilitarFechaAnterior(){\r\n\r\n    const fecha=document.querySelector(\"#fecha\");\r\n\r\n    const FechaActual= new Date();\r\n\r\n    //Formato requerido AAAA-MM-DD\r\n\r\n    const year=FechaActual.getFullYear();\r\n    const mes=FechaActual.getMonth()+1;\r\n    const dia=FechaActual.getDate()+1;\r\n\r\n    const FechaDeshabilitar=`${year}-${mes < 10 ? `0${mes}` : mes}-${dia < 10 ? `0${dia}` : dia}`\r\n    //`${year}-${mes < 10 ? `0${mes}` : mes}-${dia}`;\r\n\r\n    //console.log(FechaDeshabilitar);\r\n\r\n    fecha.min=FechaDeshabilitar;\r\n}\r\n\r\n\r\nfunction horaCita(){\r\n\r\n    const hora=document.querySelector(\"#hora\");\r\n          hora.addEventListener(\"input\",e =>{\r\n           \r\n            const Hora=e.target.value;\r\n            const HORA=Hora.split(\":\");\r\n\r\n\r\n            if(HORA[0]<10 || HORA[0]>18){\r\n                alertaError(\"Seleciona una hora correcta\",\"error\");\r\n                hora.value=\"\";  \r\n            }else{\r\n                cita.hora=Hora;\r\n                console.log(cita);\r\n            }   \r\n    });    \r\n\r\n\r\n\r\n}\r\n\r\n\r\n"]}