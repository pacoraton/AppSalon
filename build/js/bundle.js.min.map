{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","Appinicio","obtenerDatos","mostrarSeccion","cambiarPagina","paginacion","comprobarPagina","resumenCita","nombreCita","fechaCita","deshabilitarFechaAnterior","anterior","document","querySelector","siguiente","classList","add","remove","addEventListener","seccionAnterior","tabAnterior","querySelectorAll","forEach","tab","e","preventDefault","parseInt","target","dataset","menu","async","resultado","fetch","datos","json","servicio","id","precio","nombre_servicio","createElement","textContent","precio_servicio","div_servicio","idServicio","appendChild","onclick","seleccionarDiv","error","console","log","elemento","tagName","parentElement","contains","EliminarServicio","AgregarServicio","firstElementChild","nextElementSibling","Object","values","includes","ConRes","MenRes","Objeto","filter","item","nombreTexto","value","trim","length","alertaError","alerta","mensaje","tipo","setTimeout","Fecha","Date","getUTCDay","FechaActual","year","getFullYear","mes","getMonth","dia","getDate","FechaDeshabilitar","min"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina=1;\r\n\r\nconst cita={\r\n    nombre:\"\",\r\n    fecha:\"\",\r\n    hora:\"\",\r\n    servicios:[]\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded',function(){\r\n    Appinicio();\r\n});\r\n\r\nfunction Appinicio(){\r\n  //Funcion para obtener los datos \r\n    obtenerDatos();\r\n\r\n  //Mostrar seccion actual  \r\n    mostrarSeccion();  \r\n\r\n  //Funcion que oculta o muestra una secicon segun el tab al que se presiona    \r\n    cambiarPagina();\r\n\r\n  //Funcion paginacion siguiente y anterior\r\n  paginacion();  \r\n\r\n  //Funcion para comprobar en que pagina se encuentra para mostrar botones paginacion\r\n  comprobarPagina();\r\n\r\n  //Funcion que muestra error si no se han completado correctamente la cita\r\n  resumenCita();\r\n\r\n  //Funcion que valida el nombre en la cita\r\n  nombreCita();\r\n\r\n  //Funcion para validar la fecha\r\n  fechaCita();\r\n\r\n  //Desahabilitat dias anteriores \r\n  deshabilitarFechaAnterior();\r\n}\r\n\r\n\r\n//notones paginador\r\nfunction comprobarPagina(){\r\n    const anterior=document.querySelector('#anterior');\r\n    const siguiente=document.querySelector('#siguiente');\r\n\r\n    if (pagina===1){\r\n        anterior.classList.add('ocultar');\r\n        siguiente.classList.remove('ocultar');\r\n    }else if(pagina===3){\r\n        siguiente.classList.add('ocultar');\r\n        anterior.classList.remove('ocultar');\r\n       \r\n    }else{\r\n        anterior.classList.remove('ocultar');\r\n        siguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();//cambia la seccion que se muestra\r\n\r\n}\r\n\r\n//botones\r\nfunction paginacion(){\r\n    const anterior=document.querySelector('#anterior').addEventListener(\"click\",function(){\r\n        pagina--;\r\n        //console.log(pagina);\r\n        comprobarPagina();\r\n    });\r\n\r\n    const siguiente=document.querySelector('#siguiente').addEventListener(\"click\",function(){\r\n        pagina++;\r\n        //console.log(pagina);\r\n        comprobarPagina();\r\n  \r\n    });\r\n\r\n \r\n}\r\n\r\nfunction mostrarSeccion(){\r\n    //Eliminamos la seccion actual \r\n    const seccionAnterior=document.querySelector('.mostrar-seccion');\r\n    if(seccionAnterior){\r\n        seccionAnterior.classList.remove('mostrar-seccion');  \r\n    }\r\n      \r\n    //Mostramos la seccion en la que estamos\r\n    const seccionactual=document.querySelector(`#pagina-${pagina}`);\r\n          seccionactual.classList.add('mostrar-seccion'); \r\n          \r\n  //eliminar el tab anterior\r\n   const tabAnterior=document.querySelector('.tab_actual');\r\n      //console.log(tabAnterior);\r\n         if(tabAnterior){\r\n             tabAnterior.classList.remove('tab_actual');  \r\n         }\r\n            \r\n     //Se resalta el tab actual\r\n    const tab=document.querySelector(`[data-menu=\"${pagina}\"]`);\r\n    tab.classList.add('tab_actual');\r\n     \r\n\r\n}\r\n\r\n//Funcion para moverse entre paginas\r\nfunction cambiarPagina(){\r\n    const tabs= document.querySelectorAll(\".tabs button\");\r\n      \r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click',function(e){\r\n             e.preventDefault;   \r\n            pagina=parseInt(e.target.dataset.menu);\r\n           \r\n\r\n    //Se muestra la seccion seleccionada        \r\n    //const seccion=document.querySelector(`#pagina-${pagina}`);\r\n          //seccion.classList.add(\"mostrar-seccion\");  \r\n         \r\n    \r\n     //Se activa el nuevo tab seleccionado\r\n     //const tabActual=document.querySelector(`[data-menu=\"${pagina}\"]`);\r\n     //tabActual.classList.add('tab_actual');  \r\n\r\n     mostrarSeccion();\r\n     comprobarPagina();\r\n\r\n        });\r\n    });\r\n}\r\n\r\n//Obteniendo los datos\r\nasync function obtenerDatos(){\r\n\r\n    //Promise\r\n/*fetch(\"../../servicios.json\")\r\n    .then(resultado =>{\r\n        //console.log(resultado);\r\n        return resultado.json()\r\n    })\r\n    .then (datos=>{\r\n        console.log(datos.servicios)\r\n    })*/\r\n\r\n    try {\r\n\r\n   const resultado=await fetch(\"../../servicios.json\");\r\n   const datos= await resultado.json();\r\n    // console.log(datos);\r\n    const { servicios }=datos; \r\n\r\n    //Generar Html\r\n    servicios.forEach(servicio => {  \r\n     const { id,nombre,precio } =servicio;  \r\n     \r\n    //DOM Scripting\r\n\r\n    //Se agrega el nombre\r\n    const nombre_servicio=document.createElement('P');\r\n          nombre_servicio.textContent=nombre;\r\n          nombre_servicio.classList.add(\"titulo_servicio\");\r\n\r\n    //Se agrega el Precio\r\n    const precio_servicio=document.createElement('P');\r\n          precio_servicio.textContent=\"$\"+precio;\r\n          precio_servicio.classList.add('precio_ser');\r\n\r\n    //Se crea el div \r\n    const div_servicio=document.createElement('DIV');\r\n          div_servicio.classList.add('divServicio');\r\n          div_servicio.dataset.idServicio=id;\r\n          \r\n          \r\n\r\n   //Inyectamos el nombre y precio al div\r\n   div_servicio.appendChild(nombre_servicio);    \r\n   div_servicio.appendChild(precio_servicio);\r\n\r\n   //Inyectamos el div en el html\r\n   \r\n    const MostrarSer=document.querySelector('#servicios');\r\n        MostrarSer.appendChild(div_servicio);\r\n\r\n     //Selecionamos un servicio para la cita   \r\n        div_servicio.onclick=seleccionarDiv;\r\n    \r\n        \r\n\r\n   });\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n//Funcion para seleccionar una cita\r\nfunction seleccionarDiv(e){\r\nlet elemento;\r\n\r\n//Forzamos que el elemento al que damos click sea el div\r\n  if (e.target.tagName===('P')){\r\n      elemento=e.target.parentElement;\r\n  }else{\r\n      elemento=e.target;  \r\n  }\r\n\r\n   if(elemento.classList.contains(\"seleccionado\")){\r\n      \r\n    //Deseleccionamos cita\r\n       elemento.classList.remove(\"seleccionado\");\r\n     \r\n     //Identificamos el id de servicio a eliminar   \r\n     const EliminarId=(parseInt(elemento.dataset.idServicio));      \r\n        EliminarServicio(EliminarId); \r\n\r\n   }else{\r\n        //Seleccionamos cita\r\n        elemento.classList.add(\"seleccionado\")\r\n\r\n        //console.log(elemento.firstChild.nextSibling.textContent);\r\n       //Creamos el objeto con los datos del servicio seleccionado\r\n        const SerObj={\r\n            id:parseInt(elemento.dataset.idServicio),\r\n            nombre:elemento.firstElementChild.textContent,\r\n            precio:elemento.firstElementChild.nextElementSibling.textContent\r\n        }   \r\n        //console.log(SerObj);  \r\n        AgregarServicio(SerObj);\r\n   }\r\n    //console.log(elemento);\r\n }\r\n\r\n\r\n//Resumen cita\r\nfunction resumenCita(){\r\n if(Object.values(cita).includes(\"\")){\r\n\r\n    //Seleccionamos el div\r\n    const ConRes=document.querySelector(\".contenedor-resumen\");\r\n    \r\n    //Creamos el mensaje\r\n    const MenRes=document.createElement('P');\r\n          MenRes.textContent=\"Faltan datos de Servicios,hora,fecha o nombre\";\r\n          MenRes.classList.add(\"mensaje_resumen\");\r\n\r\n         ConRes.appendChild(MenRes); \r\n\r\n }\r\n}\r\n\r\n\r\nfunction AgregarServicio(Objeto){\r\n\r\n  //Destructuring\r\n const { servicios }=cita;\r\n\r\n //Combinamos el objeto con el servicio al servicios de la cita\r\n cita.servicios= [...servicios,Objeto];\r\n\r\n    console.log(cita);\r\n    //console.log(\"Se agrega un servicio\");\r\n\r\n}\r\n\r\nfunction EliminarServicio(id){\r\n//Destructuring   \r\nconst { servicios }=cita;\r\n\r\ncita.servicios=servicios.filter(item => item.id !==id); \r\nconsole.log(cita);\r\n\r\n}\r\n\r\nfunction nombreCita(){\r\n    const nombre=document.querySelector('#nombre');\r\n            nombre.addEventListener('input',(e)=> {\r\n             const nombreTexto=e.target.value.trim();       \r\n\r\n                if(nombreTexto===\"\" || nombreTexto.length <3){\r\n                    alertaError(\"Error en nombre\",\"error\");\r\n                }else{\r\n                     const alerta=document.querySelector(\".alerta\");   \r\n                     if(alerta){\r\n                         alerta.remove();\r\n                     }    \r\n\r\n                    //console.log(\"Correcto\");\r\n                    cita.nombre=e.target.value.trim();\r\n                }\r\n               \r\n                  //console.log(cita);\r\n            });\r\n}\r\n\r\n\r\n\r\nfunction alertaError(mensaje,tipo){  \r\n    \r\n//Si hay una alerta anterior no crea otra\r\nconst alertaPrevia=document.querySelector(\".alerta\");\r\n        if(alertaPrevia){\r\n            return;\r\n        }\r\n\r\n    //console.log(mensaje);\r\n    //Creamos la alertaa \r\n    const alerta=document.createElement('DIV');\r\n          alerta.textContent=mensaje;\r\n          alerta.classList.add('alerta');\r\n\r\n          if(tipo==\"error\"){\r\n              alerta.classList.add('error');\r\n          }\r\n//insertar al html\r\n    const formulario=document.querySelector(\".formulario\");\r\n          formulario.appendChild(alerta);\r\n\r\n//Borrar la alerta a los tres segundos\r\n setTimeout(() => {\r\n        alerta.remove();\r\n }, 3000);\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction fechaCita(){\r\n    const fecha=document.querySelector(\"#fecha\");\r\n          fecha.addEventListener(\"input\", (e) =>{\r\n            const Fecha= new Date(e.target.value).getUTCDay(); \r\n\r\n            if([0,6].includes(Fecha)){\r\n                alertaError(\"No puedes seleccionar fines de semana\",\"error\");\r\n            }else{\r\n                console.log(Fecha);\r\n            }\r\n               \r\n          });\r\n}\r\n\r\n\r\nfunction deshabilitarFechaAnterior(){\r\n\r\nconst fecha=document.querySelector(\"#fecha\");\r\n\r\nconst FechaActual= new Date();\r\n\r\n//Formato requerido AAAA-MM-DD\r\n\r\nconst year=FechaActual.getFullYear();\r\nconst mes=FechaActual.getMonth()+1;\r\nconst dia=FechaActual.getDate()+1;\r\n\r\nconst FechaDeshabilitar=`${year}-${mes < 10 ? `0${mes}` : mes}-${dia < 10 ? `0${dia}` : dia}`\r\n//                      `${year}-${mes < 10 ? `0${mes}` : mes}-${dia}`;\r\n\r\nconsole.log(FechaDeshabilitar);\r\n\r\nfecha.min=FechaDeshabilitar;\r\n}"]}